<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="UTF-8">
	<title>Приложения и Аутентификация | Twitch Developer Documentation</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="icon" href="img/logo/logo_twitch.png">
	<link rel="stylesheet" href="css/reset.css">
	<link href="https://fonts.googleapis.com/css?family=Merriweather+Sans" rel="stylesheet">
	<link rel="stylesheet" href="lib/font-awesome/css/font-awesome.min.css"> 

	<!-- style  -->

	<link rel="stylesheet" href="css/header.css">
	<link rel="stylesheet" href="css/aside.css">
	<link rel="stylesheet" href="css/style.css">
	<link rel="stylesheet" href="css/footer.css">

	<link rel="stylesheet" href="css/appAutn.css">
</head>
<body>
	<header>
		<a href="index.html" class="logo">

			<img src="img/logo/twitch-developers-logo.png" alt="">
			<span>RU</span>
		</a>
		<button class="btn-b btn-r" onclick="yanMoney()">Поддержать Проект</button>
		<a href="https://dev.twitch.tv/docs" class="btn-t">Перейти в Twitch</a>
	</header>
	<section class="bg-head"></section>
	<section class="modal-window">
		<h2>Поддержать проект</h2>
		<ul>
			<li>Qiwi: +7 909 145‑55‑57</li>
			<li>Яндекс: <a href="https://money.yandex.ru/to/410017168101073" target="_blanck">410017168101073</a></li>
		</ul>
	</section>
	<aside>
		<ul class="title">
			<li><a href="index.html">Обзор</a></li>
			<li class="aside-list active">
				<a href="appAunt.html">Приложения и Аутентификация</a>
				<ul class="subtitle">
					<li><a href="">Руководство</a></li>
					<li><a href="">Получение токенов: OAuth</a></li>
					<li><a href="">Получение токенов: OIDC</a></li>
				</ul>
			</li>

			<li class="aside-list"><a href="">Чат бот и IRC</a></li>
			<li class="aside-list"><a href="">Вознаграждение</a></li>
			<li class="aside-list"><a href="">Встраивание в Twitch</a></li>
			<li class="aside-list"><a href="">Разширения</a></li>
			<li class="aside-list"><a href="">Аналитика</a></li>
			<li class="aside-list"><a href="">Мобильные ссылки</a></li>
			<li class="aside-list"><a href="">Публичная Подписка</a></li>
			<li class="aside-list"><a href="">Новый Twitch API</a></li>
			<li class="aside-list"><a href="">Twitch API v5</a></li>
			<li><a href="">Словарь</a></li>
		</ul>
	</aside>
	<main>
		<h1>Приложения и Аутентификация</h1>
		<section>
			<h2>Введение</h2>
			<p>Это руководство поможет разработчикам использовать Twitch Authentication, что позволяет вашему приложению выполнять действия от имени учетной записи Twitch или получать доступ к определенным данным об учетной записи пользователя. Существует несколько способов получить доступ к учетной записи Twitch от имени пользователя. Мы используем части протокола OAuth 2.0.</p>
			<p>В дополнение к OAuth Twitch поддерживает OIDC (OpenID Connect) для более безопасного потока OAuth 2.0. Тонеры OIDC совместимы с услугами, созданными для соответствия требованиям OIDC, такими как Cognito от Amazon Web Services.</p>
			<h4>Аутентификация включает:</h4>
			<ul class="list-d">
				<li>1. <a href="">Зарегистрируйте свое приложение</a>, чтобы получить идентификатор клиента и секрет клиента.</li>
				<li>2. <a href="">Получение токена</a>. Это включает указание <a href="">областей</a> или разрешений, требуемых вашим приложением.</li>
				<li>3. Отправка маркера в ваш запрос API для аутентификации запросов API.</li>
			</ul>
			<p>Когда мы описываем этапы, мы предоставляем образцы запросов, которые будет создано вашим приложением, чтобы ваши пользователи предоставили вам доступ к их активности просмотра.</p>
			<p>Для удобства чтения часть кода с параметризованным примером показана на нескольких строках; реальные примеры находятся на одной линии.</p>
			<p><i>Образцы кода доступны на странице <a href="https://dev.twitch.tv/start/" target="_blanck">Get Started на веб-сайте Twitch</a>.</i></p>
			<p class="warning">
    			<b>Предупреждение:</b> обрабатывайте свой токен как пароль. Например, никогда не используйте токены доступа в любом общедоступном URL-адресе и никогда не показывайте маркеры на любой веб-странице, не требуя щелчка, чтобы удалить обфускацию. <i>Держите жетоны в секрете!</i>
			</p>
		</section>
		<section id="Validating-Requests">
			<h2>Проверка запросов</h2>
			<p>Для разработчиков, которые используют аутентификацию Twitch для целей входа в систему, токены доступа должны быть проверены на повторяющийся интервал. Если ваша служба использует Twitch в качестве формы аутентификации (чтобы убедиться, что пользователи - те, кого они говорят в своем приложении), периодическая проверка ранее выпущенных токенов OAuth гарантирует, что пользователи, которые разрешили ваше приложение, не решили отключить интеграцию.</p>
			<p>Мы рекомендуем проверять токены доступа перед тем, как делать запросы API, которые выполняют мутации, или получают доступ к конфиденциальной информации пользователей, если прошло более одного часа с момента последней проверки.</p>
			<p>Twitch периодически проводит аудит. Если мы обнаружим приложение, которое не повторяет проверку токенов доступа (то есть приложение, которое проверяет только для входа в систему, а не после этого), мы будем обращаться к разработчикам и работать с ними для решения проблемы. Если проблема не устранена, мы можем предпринять карательные действия, такие как аннулирование ключа API разработчика или дросселирование производительности приложения.</p>
			<p>Валидация важна из-за того, как работают токены доступа OAuth и ожидания конечного пользователя для контроля сеанса OAuth. Например, пользователи, которые предпочитают отключать вашу интеграцию со своими учетными записями Twitch, могут сделать это из своих настроек учетной записи в Twitch. Когда пользователь отключается от интеграции, все токены OAuth между этим пользователем и эта интеграция аннулируются. В этом случае ожидается, что токены OAuth привязаны к сеансам сторонних служб; как таковые, любые существующие сеансы между отключенным пользователем и этими службами также должны быть аннулированы.</p>
			<p>При проверке каждого из ваших запросов отправьте запрос конечной точке проверки (https://id.twitch.tv/oauth2/validate) с вашим токеном OAuth в заголовке. Если вы аутентифицированы, ответ включает статус вашего токена. Успешный ответ указывает, что ваш токен доступа действителен.</p>
			<h4>Вот пример запроса:</h4>
			<pre>
					curl -H "Authorization: OAuth &lt;Токен доступа>" https://id.twitch.tv/oauth2/validate
			</pre>
			<h4>И вот пример ответа:</h4>
			<pre>
				{
					"client_id": "&lt;Ваш клиент ID>",
					"login": "&lt;Авторизованный пользователь login>",
					"scopes": [
						"&lt;Запрошенные области>"
				 	],
					"user_id": "&lt;ID Авторизованного пользователя>"
				}
			</pre>
			
		</section>
		<section>
			<h2>Регистрация</h2>
			<p>Чтобы создать приложение, использующее API Twitch, сначала необходимо зарегистрировать свое приложение на сайте разработчика Twitch. При создании этого приложения введите свой URI перенаправления, в котором пользователи перенаправляются после авторизации.</p>
			<p>После создания приложения-разработчика вам присваивается идентификатор клиента.  Некоторые потоки аутентификации также требуют секретности клиента, которую вы можете создать на той же странице, что и идентификатор клиента.</p>
			<ul class="list-def">
				<li>Склиент ID являются общедоступными и могут быть колективными (например, встроены в источник веб-страницы).</li>
				<li>Секреты клиента эквивалентны паролю для вашего приложения и должны быть конфиденциальными. Никогда не выставляйте его пользователям, даже в неясной форме.</li>
			</ul>
			<p>Поскольку секрет вашего клиента является конфиденциальным, мы не можем показать его вам после того, как вы покинете страницу, поэтому обязательно записывайте ее где-нибудь в безопасности. Кроме того, генерация нового секретного ключа немедленно аннулирует текущий, что может привести к сбою ваших запросов API до тех пор, пока ваше приложение не будет обновлено.</p>
			<p><b>Предупреждение:</b> <i>Идентификаторы клиентов должны быть уникальными для каждого приложения: не используйте повторно идентификаторы клиентов в нескольких приложениях. Кроме того, приложения должны запросить соответствующий набор областей для целевых API-интерфейсов. Несоблюдение этих рекомендаций может привести к приостановке доступа вашего приложения к API Twitch.</i></p>
		</section>
		<section>
			<h2>Типы токенов</h2>
			<p>Twitch поддерживает несколько типов токенов:</p>
			<table class="descript">
				<tr>
					<td>Тип токена</td>
					<td>Описание</td>
				</tr>
				<tr>
					<td>ID токен (OIDC)</td>
					<td><p>Набор требований к конечному пользователю для данной авторизации. Использование токенов идентификатора OIDC (JWT) позволяет вам получить подробную информацию о вашем пользователе (например, адрес электронной почты) для конкретной авторизации. Эти данные представлены заявками в полезной нагрузке токена идентификатора.</p>
					<p>Наша конечная точка обнаружения находится по адресу https://id.twitch.tv/oauth2/.well-known/openid-configuration. Его можно использовать со стандартными клиентами OIDC, такими как <a href="https://aws.amazon.com/ru/cognito/">AWS Cognito</a>.</p></td>
				</tr>
				<tr>
					<td>Токен доступа пользователя</td>
					<td><p>Аутентифицируйте пользователей и разрешите вашему приложению делать запросы от их имени. Если ваше приложение использует Twitch для входа в систему или делает запросы в контексте аутентифицированного пользователя, вам необходимо создать токен доступа пользователя.</p></td>
				</tr>
				<tr>
					<td>Токен доступа приложения</td>
					<td>
						<p>Аутентифицируйте приложение и разрешите ему доступ к ресурсам, которыми он владеет. Поскольку токены доступа приложений не связаны с пользователем, они не могут использоваться с конечными точками, требующими аутентификации пользователя.</p>
						<p>Некоторые конечные точки Twitch API требуют проверки подлинности приложения (не аутентификации пользователя). Если ваше приложение использует эти конечные точки, вам необходимо создать токен доступа к приложениям. Точки доступа к доступу получают учетные данные клиента (а не учетные данные пользователя). Они позволяют вам делать безопасные запросы API, которые не от имени конкретного пользователя. Учетные данные клиента также могут использоваться вместо заголовков идентификаторов клиента для надежной идентификации вашего приложения.</p>
						<p>Точки доступа к приложениям истекают примерно через 60 дней, поэтому вы должны проверить, что токен доступа к вашему приложению действителен, отправив запрос на конечную точку проверки (см. <a href="#Validating-Requests">Проверка запросов</a>). Если ваш токен истек, создайте новый.</p>
						<p>Точки доступа к приложениям предназначены только для запросов API-интерфейсов сервер-сервер и никогда не должны включаться в код клиента.</p>
					</td>
				</tr>
			</table>
		</section>
		<section>
			<h2>Получение токенов</h2>
			<p>Домен, посвященный аутентификации Twitch, - https://id.twitch.tv. (Предыдущие посетители этой страницы будут замечать, что URL-адреса были обновлены, чтобы заменить https://api.twitch.tv/kraken на https://id.twitch.tv. Код, который использует старый домен kraken для проверки подлинности Twitch, будет продолжен работать до конца 2018 года, когда мы удаляем функциональность Twitch API v5. Twitch API v5 в настоящее время устарел.)</p>
			<p>Мы поддерживаем несколько потоков аутентификации:</p>
			<table class="descript">
				<tr>
					<td>Тип потока</td>
					<td>Описание</td>
				</tr>
				<tr>
					<td>Неявный поток кода</td>
					<td>В вашем приложении не используется сервер, например клиентское приложение JavaScript или мобильное приложение. Этот подход не требует сервера, который должен делать запросы к API.</td>
				</tr>
				<tr>
					<td>Кодирование кода авторизации</td>
					<td>Ваше приложение использует сервер, может безопасно хранить секрет клиента и может выполнять запросы сервера к серверу.</td>
				</tr>
				<tr>
					<td>Поток клиентских учетных данных</td>
					<td>Вам нужен токен доступа к приложениям.</td>
				</tr>
			</table>
			<p>Процедура, которую вы должны использовать для получения токенов, зависит от типов) тонов, которые вы хотите:</p>
			<table class="check">
				<tr>
					<td>Процедура</td>
					<td>Токен доступа пользователя</td>
					<td>ID токен</td>
					<td>Токен доступа к приложениям</td>
				</tr>
				<tr>
					<td><a href="#">Неявный поток кода OIDC</a></td>
					<td class="ta-c"><i class="fa fa-check" aria-hidden="true"></i></td>
					<td class="ta-c"><i class="fa fa-check" aria-hidden="true"></i></td>
					<td></td>
				</tr>
				<tr>
					<td><a href="#">Неявный поток кода OAuth</a></td>
					<td class="ta-c"><i class="fa fa-check" aria-hidden="true"></i></td>
					<td></td>
					<td></td>
				</tr>
				<tr>
					<td><a href="#">Поток кода авторизации OIDC</a></td>
					<td class="ta-c"><i class="fa fa-check" aria-hidden="true"></i></td>
					<td class="ta-c"><i class="fa fa-check" aria-hidden="true"></i></td>
					<td></td>
				</tr>
				<tr>
					<td><a href="#">Поток кода авторизации OAuth</a></td>
					<td class="ta-c"><i class="fa fa-check" aria-hidden="true"></i></td>
					<td></td>
					<td></td>
				</tr>
				<tr>
					<td><a href="#">Поток учетных данных клиента OAuth</a></td>
					<td></td>
					<td></td>
					<td class="ta-c"><i class="fa fa-check" aria-hidden="true"></i></td>
				</tr>
			</table>
			<p>В целях безопасности в примерах в этих разделах используется токен поддельного доступа,
				<span class="bg-code">0123456789abcdefghijABCDEFGHIJ</span>.</p>
		</section>
		<section>
			<h2>Отправка доступа пользователей и токенов доступа к приложениям</h2>
			<p>Когда запрос API требует аутентификации, отправьте токен доступа в виде заголовка.  Заголовок отличается, в зависимости от того, какой API вы используете:</p>
			<p>В новом Twitch API:</p>
			<pre class="mt-n">
				curl -H "Authorization: Bearer &lt;access token>" https://api.twitch.tv/helix/
			</pre>
			<p>В Twitch v5:</p>
			<pre class="mt-n">
				curl -H "Authorization: OAuth &lt;access token>" https://api.twitch.tv/kraken/
			</pre>
		</section>
		<section>
			<h2>Отмена токенов доступа</h2>
			<p>Чтобы очистить ранее полученные токены доступа, используйте конечную точку торможения токена Twitch OAuth. Его реализация соответствует <a href="https://tools.ietf.org/html/rfc7009#section-2.1">стандарту OAuth</a>.</p>
			<p>На своем сервере отмените токен доступа, выполнив этот запрос:</p>
			<pre>
				POST
				https://id.twitch.tv/oauth2/revoke
    			?client_id=&lt;your client ID>
    			&token=&lt;your OAuth token>
			</pre>
			<p>Например, используя вашего ранее аутентифицированного пользователя, запрос:</p>
			<pre>POST https://id.twitch.tv/oauth2/revoke?client_id=uo6dggojyb8d6soh92zknwmi5ej1q2&token=0123456789abcdefghijABCDEFGHIJ</pre>
			<p>Этот запрос также работает для токенов доступа к приложениям. Чтобы аннулировать токен доступа к приложениям, который мы создали ранее, сделайте этот запрос:</p>
			<pre>POST https://id.twitch.tv/oauth2/revoke?client_id=uo6dggojyb8d6soh92zknwmi5ej1q2&token=prau3ol6mg5glgek8m89ec2s9q5i3i</pre>
			<p>Как успешные запросы, так и запросы с плохими токенами возвращают <span class="bg-code">200 OK</span> без тела. Запросы с плохими токенами возвращают один и тот же ответ, поскольку нет значимого действия, которое клиент может предпринять после отправки плохого токена.</p>
			<p>Запрошенные неверные запросы возвращают <span class="bg-code">400 Bad Request</span>, а также информацию о том, как исправить запрос, как правило, напоминание запрашивающего, чтобы включить <span class="bg-code">client_id</span>.</p>
		</section>
		<section>
			<h2>Обновление токенов доступа</h2>
			<p>Новые токены доступа OAuth2 истекают. Периоды истечения срока действия токена различаются по длине, основываясь на том, как был получен токен. Токены возвращают поле <span class="bg-code">expires_in</span>, указывающее, как долго должен продолжаться токен. Однако <i>вы должны создавать свои приложения таким образом, чтобы они были устойчивыми к ошибкам аутентификации токена</i>. Другими словами, приложение, способное обновлять токены, не должно знать, как долго будет действовать токен. Скорее, он должен быть готов к тому, чтобы токен стал недействительным в любое время.</p>
			<p>Чтобы позволить приложениям оставаться аутентифицированными в течение длительного времени в мире истекающих токенов, мы разрешаем обновлять сеансы в соответствии с рекомендациями в разделе <a href="https://tools.ietf.org/html/rfc6749#section-6">«Обновление токена доступа» в RFC OAuth2</a>. Как правило, обновлять токены используются для продления срока службы заданной авторизации.</p>
			<p>Выходы токена не влияют на существующие токены. В будущем мы будем отзывать постоянно живущие сессии.</p>
			<p>(Обратите внимание, что токены доступа и токены доступа не могут быть обновлены.)</p>
			<h3>How to Refresh</h3>
			<p>Чтобы обновить токен, вам нужна пара токенов доступа / обновления, исходящая из тела. Например:</p>
			<pre>
				{
				  "access_token": "0123456789abcdefghijABCDEFGHIJ",
				  "refresh_token": "eyJfaWQmNzMtNGCJ9%6VFV5LNrZFUj8oU231/3Aj",
				  "expires_in": 3600,
				  "scope": "viewing_activity_read",
				  "token_type": "bearer"
				}
			</pre>
			<p>Вам также нужны <span class="bg-code">client_id</span> и <span class="bg-code">client_secret</span>, используемые для создания указанной пары токенов доступа / обновления доступа</p>
			<p>Чтобы обновить, используйте этот запрос:</p>
			<pre>
				curl -X POST https://id.twitch.tv/oauth2/token
			    --data-urlencode
			    ?grant_type=refresh_token
			    &refresh_token=&lt;your refresh token>
			    &client_id=&lt;your client ID>
			    &client_secret=&lt;your client secret>
			</pre>
			<p>Существует несколько требуемых параметров и один необязательный параметр:</p>
		</section>
	</main>
	<footer>
		<ul>
			<li class="info">
				<a href="" class="logo">
					<img src="img/logo/twitch-developers-logo.png" alt="">
					<span>RU</span>
				</a>
				<p>Данный сайт разрабатываеться для удобного искользовани Twitch Developer в России</p>
				
			</li>
			<li class="social">
				<ul>
					<li><a href="https://vk.com/id473238919" target="_blanck"><i class="fa fa-vk" aria-hidden="true"></i></a></li>
					<li><a href="https://twitter.com/l4legenda" target="_blanck"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
					<li><a href="https://www.youtube.com/channel/UCIDUNv2XQyBrg9pe7n71RDw" target="_blanck"><i class="fa fa-youtube-play" aria-hidden="true"></i></a></li>
					<li><a href="https://github.com/L4legenda" target="_blanck"><i class="fa fa-github" aria-hidden="true"></i></a></li>
					<li><a href="mailto:l4legenda@gmail.com" target="_blanck"><i class="fa fa-envelope" aria-hidden="true"></i></a></li>

				</ul>
			</li>
			<li>
				<ul class="money">
					<h2>Помощь проекту:</h2>
					<li>Qiwi: +7 909 145‑55‑57</li>
					<li>Яндекс: <a href="https://money.yandex.ru/to/410017168101073" target="_blanck">410017168101073</a></li>
				</ul>
			</li>
		</ul>
	</footer>
	<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
	<script src="js/script.js"></script>
</body>
</html>